- name: kubernetes.certmanager.certificate
  rules:
  - alert: CertmanagerCertificateExpiredSoon
    expr: certmanager_certificate_expiration_timestamp_seconds{job="cert-manager"} - time() < 1209600
    for: 1h
    labels:
      severity: warning
    annotations:
      description: The certificate {{$labels.exported_namespace}}/{{$labels.name}} will expire in less than 2 weeks
      summary: Certificate expire soon

  - alert: CertmanagerCertificateExpired
    expr: certmanager_certificate_expiration_timestamp_seconds{job="cert-manager"} - time() < 0
    for: 1h
    labels:
      severity: warning
    annotations:
      description: Certificate {{$labels.exported_namespace}}/{{$labels.name}} expires
      summary: Certificate expires
