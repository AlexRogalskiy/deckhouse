apiVersion: apiextensions.k8s.io/v1beta1
kind: CustomResourceDefinition
metadata:
  name: dexclients.deckhouse.io
  labels:
    heritage: deckhouse
    module: user-authn
spec:
  group: deckhouse.io
  scope: Namespaced
  names:
    plural: dexclients
    singular: dexclient
    kind: DexClient
  version: v1alpha1
  validation:
    openAPIV3Schema:
      type: object
      required:
      - spec
      properties:
        spec:
          type: object
          properties:
            allowedGroups:
              type: array
              description: 'Groups of users having access.'
              items:
                type: string
            redirectURIs:
              type: array
              description: 'Array or urls that dex can redirect to after successful authentication.'
              items:
                type: string
            trustedPeers:
              type: array
              description: 'OAuth2 client IDs that allowed cross authentication with the current client.'
              items:
                type: string
