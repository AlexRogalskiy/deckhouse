Модуль ping-exporter
====================

Данный модуль предназначен для мониторинга сетевого взаимодействия между всеми узлами кластера, а также, опционально, до дополнительных внешних узлов.

Каждый узел два раза в секунду, отправляет ICMP пакеты на все другие узлы кластера (и на опциональные внешние узлы) и экспортирует данные в `Prometheus`.
В комплекте идёт `dashboard` для `Grafana`, на котором отражаются соответствующие графики.

### Как работает

Mодуль следит за любыми изменениями поля `.status.addresses` узла. В случае выявления таковых,
запускается хук, который собирает полный список имен узлов и их адресов и передаёт в daemonSet, что в свою очередь пересоздаёт поды.
Таким образом, ping проверяет всегда актуальный список узлов.

### Что нужно настроить?

Основной функционал пингования нодами кластера друг друга работает из коробки, в настройке не нуждается.

#### Добавление дополнительных IP адресов для мониторинга

В конфигурацию модуля в ConfigMap deckhouse можно разместить подобную конструкцию:
```yaml
  pingExporter: |
    externalTargets:
    - name: google-primary
      host: 8.8.8.8
    - name: yaru
      host: ya.ru
    - host: youtube.com
```

Поле `name` используется для отображения в графане. Если не указать `name`, то используется обязательное поле `host`.
