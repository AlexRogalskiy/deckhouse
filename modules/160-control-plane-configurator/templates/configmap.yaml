{{- if .Values.controlPlaneConfigurator.authzWebhook.url }}
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: control-plane-configurator-authz-webhook
  namespace: d8-system
{{ include "helm_lib_module_labels" (list .) | indent 2 }}
data:
  args.yaml: |
    authzWebhookURL: {{ .Values.controlPlaneConfigurator.authzWebhook.url | quote }}
    authzWebhookCA: |
{{ .Values.controlPlaneConfigurator.authzWebhook.ca | indent 6 }}
{{- end }}

{{- if .Values.controlPlaneConfigurator.oidc.issuerURL }}
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: control-plane-configurator-oidc
  namespace: d8-system
{{ include "helm_lib_module_labels" (list .) | indent 2 }}
data:
  args.yaml: |
    oidcIssuerURL: {{ .Values.controlPlaneConfigurator.oidc.issuerURL | quote }}
  {{- if .Values.controlPlaneConfigurator.oidc.ca }}
    oidcCA: |
{{ .Values.controlPlaneConfigurator.oidc.ca | indent 6 }}
  {{- end }}
{{- end }}
