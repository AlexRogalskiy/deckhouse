{{- range $storageClass := .Values.vsphereCsiDriver.storageClasses }}
---
kind: StorageClass
apiVersion: storage.k8s.io/v1
metadata:
  name: vsphere-{{ $storageClass.name }}
  namespace: kube-system
  {{- if $storageClass.default }}
  annotations:
    storageclass.kubernetes.io/is-default-class: "true"
  {{- end }}
{{ include "helm_lib_module_labels" (list $) | indent 2 }}
provisioner: vsphere.csi.vmware.com
parameters:
  parent_type: "Datastore"
  parent_name: {{ $storageClass.datastore | quote }}
allowVolumeExpansion: true
{{- end }}
