{{- define "gcp_cloud_config" }}
[Global]
# TODO: Подумать про аутентификацию
# TODO: Подумать, нужны ли две этих опции
regional = true
multizone = true
network-name = {{ .Values.cloudProviderGcp.networkName | quote }}
subnetwork-name = {{ .Values.cloudProviderGcp.subnetworkName | quote }}
{{- end }}
---
apiVersion: v1
kind: Secret
metadata:
  name: cloud-controller-manager
  namespace: d8-cloud-provider-gcp
{{ include "helm_lib_module_labels" (list . (dict "app" "cloud-controller-manager")) | indent 2 }}
type: Opaque
data:
  cloud-config: {{ include "gcp_cloud_config" . | b64enc | quote }}
