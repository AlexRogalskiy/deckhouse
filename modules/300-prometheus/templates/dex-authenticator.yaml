{{- if ( .Values.global.enabledModules | has "user-authn" ) }}
apiVersion: deckhouse.io/v1alpha1
kind: DexAuthenticator
metadata:
  name: grafana
  namespace: kube-prometheus
{{ include "helm_lib_module_labels" (list . ) | indent 2 }}
spec:
  applicationDomain: {{ include "helm_lib_module_public_domain" (list . "grafana") }}
  sendAuthorizationHeader: false
  applicationIngressCertificateSecretName: "ingress-tls"
{{- end }}
