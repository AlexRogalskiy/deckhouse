{{- if .Values.global.enabledModules | has "user-authn" }}

  {{- $context := . }}
  {{- $config := .Values.prometheus.dexAuthenticator }}
  {{- $domain := (include "helm_lib_addon_public_domain" (list . "prometheus")) }}
  {{- $chart_name := .Chart.Name }}
  {{- $use_kubernetes_dex_client_app := false }}
  {{- $set_authorization_header := false }}

  {{- include "dex-authenticator" (list $context $config $chart_name $domain $use_kubernetes_dex_client_app $set_authorization_header) }}
{{- end }}
