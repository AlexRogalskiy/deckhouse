- name: kubernetes.dns
  rules:
  - alert: KubeDnsDown
    expr: absent(up{job=~"kube-dns|coredns"} == 1)
    for: 5m
    labels:
      impact: critical
      likelihood: certain
    annotations:
      polk_flant_com_markup_format: markdown
      description: |-
        Нет ни одного работающего пода kube-dns или coredns. DNS внутри кластера не работает! Приложения не могут разыменовать внутренние сервисы и внешние домены.
        Что делать:
        1. `kubectl -n kube-system describe deployment -l k8s-app=kube-dns`
        2. `kubectl -n kube-system describe pod -l k8s-app=kube-dns`
      summary: >
        Kube-dns или CoreDNS не работает.
