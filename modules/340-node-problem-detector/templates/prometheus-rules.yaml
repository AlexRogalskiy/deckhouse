{{- if (.Values.global.enabledModules | has "prometheus") }}
---
apiVersion: monitoring.coreos.com/v1
kind: PrometheusRule
metadata:
  name: {{ .Chart.Name }}
  namespace: kube-prometheus
{{ include "helm_lib_module_labels" (list . (dict "app" "prometheus" "prometheus" "main" "component" "rules")) | indent 2 }}
spec:
  groups:
{{- range $path, $bytes := .Files.Glob "prometheus-rules/*.yaml" }}
{{ $.Files.Get $path | indent 4 }}
{{- end }}
{{- end }}
