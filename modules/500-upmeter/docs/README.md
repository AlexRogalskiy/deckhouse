---
title: "Модуль upmeter"
---

Модуль предназначен для мониторинга состояния кластера и отображения страницы статуса с «уровнем доступности» (SLA).

- **agent** — программа, которая периодически запускает пробы и отправляет результаты в агрегатор. Работает на мастерах.
- **upmeter** — агрегатор результатов и api-сервер для их извлечения. Умеет соединять историю результатов проб с custom resource Downtime, где вручную описываются инциденты.
- **front**
    - **status** — показывает текущий уровень доступности за последние 10 минут (по умолчанию требует авторизации, но её можно отключить).
    - **web-ui** — показывает уровни доступности по пробам во времени после (требует авторизации).
- **smoke-mini** — постоянное *smoke-тестирование* с помощью StatefulSet, похожего на настоящее приложение.

## Агенты upmeter

Агенты запускаются только на мастер-узлах.

Пробы из группы `control-plane` периодически создают и удаляют ресурсы `Namespace` c лейблом `heritage=upmeter`, а также `ConfigMap`, `Deployment`, `Pod` в `ns/d8-upmeter`. В результате ошибок, эти ресурсы могут не удаляться и накапливаться. Планируется добавить сборщик мусора для таких ситуаций, а пока можно удалять вручную, upmeter не сломается.

```
kubectl get ns -l heritage=upmeter --no-headers
``` 
