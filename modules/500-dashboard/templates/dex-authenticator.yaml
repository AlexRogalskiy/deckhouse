{{- if ( .Values.global.enabledModules | has "user-authn" ) }}
apiVersion: deckhouse.io/v1alpha1
kind: DexAuthenticator
metadata:
  name: dashboard
  namespace: d8-dashboard
  annotations:
    dex-authenticator.flant.com/use-kubernetes-app-key: "true"
{{ include "helm_lib_module_labels" (list . ) | indent 2 }}
spec:
  applicationDomain: {{ include "helm_lib_module_public_domain" (list . "dashboard") }}
  sendAuthorizationHeader: true
  applicationIngressCertificateSecretName: "ingress-tls"
{{- end }}
