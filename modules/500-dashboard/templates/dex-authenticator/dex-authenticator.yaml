{{- if and (ne (include "helm_lib_module_https_mode" .) "Disabled") (.Values.global.enabledModules | has "user-authn") }}

  {{- $context := . }}
  {{- $config := .Values.dashboard.dexAuthenticator }}
  {{- $domain := (include "helm_lib_module_public_domain" (list . "dashboard")) }}
  {{- $chart_name := .Chart.Name }}
  {{- $use_kubernetes_dex_client_app := true }}
  {{- $set_authorization_header := true }}

  {{- include "dex-authenticator" (list $context $config $chart_name $domain $use_kubernetes_dex_client_app $set_authorization_header) }}
{{- end }}
