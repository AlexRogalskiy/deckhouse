spec:
  versions:
    - name: v1alpha1
      schema:
        openAPIV3Schema:
          description: |
            CustomResource для описания источника логов в log-pipeline.

            Каждый CustomResource `PodLoggingConfig` описывает правила сбора логов из указанного Namespace.
          properties:
            spec:
              properties:
                labelSelector:
                  description: |
                    Настройка `labelSelector` позволяет задать фильтр по Pod Labels.

                    Подробнее про выражения можно узнать в [документации](https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/).
                  properties:
                    matchLabels:
                      description: Список label, которые должен иметь Pod.
                    matchExpressions:
                      items:
                        description: Список выражений для label, которые должен иметь Pod.
                logFilter:
                  description: |
                    Список фильтров для логов.
                    Только логи, подпавшие под правила, будут сохранены в хранилище.
                  items:
                    properties:
                      field:
                        description: Имя поля для фильтрации.
                      operator:
                        description: |
                          Оператор, который можно применить для фильтрации:
                          * Оператор `In` ищет сроку или элемент в массиве
                          * Оператор `NotIn` является инверсивной оператора `In`
                          * Оператор `Regex` пытается проверить строку в поле c использование регулярного вырадения, только логи, в которых есть поля подпадающие под регулярное выражение пройдут в хранилище
                          * Оператор `NotRegex` является инверсией оператора `Regex`, в хранилище попадут логи, в которых нет поля или же оно не подпадает под регулярное выражение
                          * Оператор `Exists` проверяет наличие поля и пропускает логи только если поле есть
                          * Оператор `DoesNotExist` проверяет наличие поля и пропускает логи только если поле отсутствует
                      values:
                        description: |
                          Список регулярных выражений или значений для сравнения. Можно использовать целые числа или строки.
                          Поля с числами с плавающей запятой и поля логического типа будут преобразованы в строки при сравнении.
                clusterDestinationRefs:
                  description: Список бэкендов хранения (CRD `ClusterLogDestination`), в которые будет отправлено сообщение.
