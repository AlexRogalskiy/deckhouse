---
title: "Модуль flant-pricing"
---

Модуль предназначен для расчёта стоимости обслуживания кластера.

Для каждой NodeGroup, за исключением выделенных мастеров, автоматически вычисляется тип биллинга. Существуют следующие типы биллинга нод:
* Ephemeral - если нода относится к NodeGroup с типом Cloud, то она автоматически относится к Ephemeral.
* VM - данный тип проставляется автоматически, если для ноды удалось определить тип виртуализации с помощью команды [virt-what](https://people.redhat.com/~rjones/virt-what/).
* Hard - все остальные ноды автоматически относятся к данному типу.
* Special - данный тип необходимо вручную проставлять на NodeGroup, сюда относятся выделенные ноды, которые нельзя "потерять".

В случае, если в кластере есть ноды с типом биллинга Special или автоматическое определение сработало некорректно,
то вы всегда можете вручную установить корректный тип биллинга.

Для установки типа биллинга на нодах рекомендуется устанавливать аннотацию на NodeGroup, к которой относится нода:
```
kubectl patch ng worker --patch '{"spec":{"nodeTemplate":{"annotations":{"pricing.flant.com/nodeType":"Special"}}}}' --type=merge
```

Если в рамках одной NodeGroup есть ноды с разными типами биллинга, то можно навесить аннотацию отдельно на каждый объект Node:
```
kubectl annotate node test pricing.flant.com/nodeType=Special
```
