---
title: "Модуль flant-pricing"
---

Модуль предназначен для расчёта стоимости обслуживания кластера.

Для каждой NodeGroup, за исключением выделенных мастеров вычисляется тип биллинга. Существуют следующие типы биллинга нод:
* Ephemeral - если нода относится к NodeGroup с типом Cloud, то она автоматически относится к Empemeral.
* Hard - данный тип необходимо вручную проставлять на NodeGroup, сюда относятся baremetal ноды.
* VM - данный тип необходимо вручную проставлять на NodeGroup, сюда автоматически относятся ноды с типом Hybrid.
* Special - данный тип необходимо вручную проставлять на NodeGroup, сюда относятся выделенные ноды, которые нельзя "потерять".
* Unknown - данный тип устанавливается всем нодам, которым нельзя автоматически определить тип, и ни один тип не указан.

Для установки типа биллинга на нодах рекомендуется устанавливать аннотацию на NodeGroup, к которой относится нода:
```
kubectl patch ng worker --patch '{"spec":{"nodeTemplate":{"annotations":{"pricing.flant.com/nodeType":"Hard"}}}}' --type=merge
```

Если в рамках одной NodeGroup есть ноды с разным типом биллинга, то можно навесить аннотацию на сам объект Node
```
kubectl annotate node test pricing.flant.com/nodeType=Hard
```

В случае, если в кластере есть ноды с типом биллинга Unknown, будет отправляться алерт D8FlantPricingUnknownNodesInCluster.
