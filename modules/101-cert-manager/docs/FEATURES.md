---
title: "Управление сертификатами"
---

Для установки, управления ресурсами и процессом обновления [cert-manager](https://github.com/jetstack/cert-manager), в Deckhouse есть модуль [cert-manager]({{site.baseurl}}/modules/101-cert-manager/).

## Установка и обновление модуля
Модуль производит надежную и высокодоступную инсталляцию cert-manager.

При установке модуля автоматически учитываются особенности кластера:
- компонент (webhook), к которому обращается `kube-apiserver`, устанавливается на мастер узлы;
- в случае недоступности webhook – производится временное удаление `apiservice`, чтобы недоступность *cert-manager* не блокировала работу кластера.

Обновление самого модуля происходит в автоматическом режиме, в том числе с миграцией ресурсов cert-manager.

## Возможности модуля cert-manager и патчи Фланта
Модуль обеспечивает использование всех возможностей оригинального cert-manager, в том числе:
- Заказ сертификатов во всех поддерживаемых источниках, таких как *Let’s Encrypt*, *HashiCorp Vault*, *Venafi*;
- Выпуск самоподписанных сертификатов;
- Поддержку актуальности сертификатов, автоматический перевыпуск и т.д.

Оригинальный [cert-manager](https://github.com/jetstack/cert-manager) был обновлен таким образом, что поды `cm-acme-http-solver` могут выполняться на мастер-узлах, а также на выделенных узлах.

## Мониторинг
Модуль обеспечивает экспорт метрик в Prometheus, что позволяет мониторить:
- срок действия сертификатов;
- корректностть перевыпуска сертификатов.

## Роли доступа к ресурсам
В модуле предопределены несколько продуманных ролей для удобного доступа к ресурсам:
- `User` – доступ на чтение к ресурсам Certificate и Issuer в доступных ему namespace, а также к глобальным clusterIssue
- `Editor` – управление ресурсами Certificate и Issuer в доступных ему namespace
- `ClusterEditor` – управление ресурсами Certificate и Issuer в любых namespace
- `SuperAdmin` – управление внутренними служебными объектами

Подробнее про внутреннее устройство можно узнать [в документации]({{site.baseurl}}/modules/200-operator-prometheus/internals.html).
