---
apiVersion: deckhouse.io/v1alpha1
kind: ClusterConfiguration
clusterType: Cloud
cloud:
  provider: OpenStack
  prefix: 'candi-${PREFIX}'
podSubnetCIDR: 10.111.0.0/16
serviceSubnetCIDR: 10.222.0.0/16
kubernetesVersion: '${KUBERNETES_VERSION}'
clusterDomain: "cluster.local"
---
apiVersion: deckhouse.io/v1alpha1
kind: InitConfiguration
deckhouse:
  devBranch: '${DEV_BRANCH}'
  imagesRepo: registry.flant.com/sys/antiopa
  registryDockerCfg: '${DECKHOUSE_DOCKERCFG}'
  configOverrides:
    prometheusMadisonIntegrationEnabled: false
    global:
      clusterName: smoke
      project: dev-rnd
      modules:
        publicDomainTemplate: "%s.k8s.smoke.flant.com"
---
apiVersion: deckhouse.io/v1alpha1
kind: OpenStackClusterConfiguration
layout: Standard
sshPublicKey: '${SSH_PUBLIC_KEY}'
standard:
  internalNetworkDNSServers:
    - 8.8.8.8
  internalNetworkCIDR: 192.168.195.0/24
  internalNetworkSecurity: true
  externalNetworkName: public
provider:
  authURL: 'https://cloud.flant.com/v3/'
  domainName: 'Default'
  tenantName: 'dev-rnd'
  username: 'e2e-tests'
  password: '${OS_PASSWORD}'
  region: 'HetznerFinland'
masterNodeGroup:
  replicas: 1
  instanceClass:
    flavorName: m1.large
    imageName: ubuntu-18-04-cloud-amd64
  volumeTypeMap:
    nova: ceph-ssd
