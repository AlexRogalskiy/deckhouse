apiVersion: apiextensions.k8s.io/v1beta1
kind: CustomResourceDefinition
metadata:
  name: openstackinstanceclasses.deckhouse.io
  labels:
    heritage: deckhouse
    module: cloud-provider-openstack
spec:
  group: deckhouse.io
  versions:
    - name: v1alpha1
      served: true
      storage: true
  scope: Cluster
  names:
    plural: openstackinstanceclasses
    singular: openstackinstanceclass
    kind: OpenStackInstanceClass
    categories:
    - cloudinstanceclasses
  validation:
    openAPIV3Schema:
      type: object
      description: OpenStackInstanceClass defines OpenStack-specific properties for to-be-provisioned Instances.
      required:
      - spec
      properties:
        spec:
          type: object
          required:
          - flavorName
          - imageName
          - mainNetwork
          properties:
            flavorName:
              description: Flavor of OpenStack servers.
              example: m1.medium
              type: string
            imageName:
              description: Image to use while provisioning OpenStack servers.
              example: ubuntu-18-04-cloud-amd64
              type: string
            rootDiskSize:
              description: If present, OpenStack will order a Cinder volume and the server will use if for its root.
              example: 20
              type: integer
            mainNetwork:
              description: Path to the network that VirtualMachines' primary NICs will connect to.
              example: k8s-msk-178
              type: string
            additionalNetworks:
              description: Paths to networks that VirtualMachines' secondary NICs will connect to.
              example:
                - "BGP-network-VLAN-3894"
                - "External-VLAN-3699"
              type: array
              items:
                type: string
            additionalSecurityGroups:
              description: Security groups that will be applied to VM's network ports in addition to security groups set in provider configuration
              example:
              - "security-group-1"
              - "security-group-2"
              type: array
              items:
                type: string
