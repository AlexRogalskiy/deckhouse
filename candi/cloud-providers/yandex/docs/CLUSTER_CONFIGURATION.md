---
title: "Cloud provider — Yandex.Cloud: provider configuration"
---

## YandexClusterConfiguration
A particular placement strategy is defined via the `YandexClusterConfiguration` struct. It has the following fields:

* `layout` — the way resources are located in the cloud;
  * Possible values: `Standard`, `WithoutNAT`, `WithNATInstance` (the description is provided below);
* `withNATInstance` — settings for the `WithNATInstance` layout;
  * `natInstanceExternalAddress` — a [reserved external IP address](faq.html#reserving-a-public-ip-address) (or `externalSubnetID` address if specified);
  * `internalSubnetID` — ID of a subnet for the internal interface;
  * `externalSubnetID` — if specified, an additional network interface will be added to the node (the node will use it as a default route);
* `provider` — parameters for connecting to the Yandex.Cloud API;
  * `cloudID` — the cloud ID;
  * `folderID` — ID of the directory;
  * `serviceAccountJSON` — a JSON key generated by [yc iam key create](environment.html)
* `masterNodeGroup` — parameters of the master's NodeGroup;
  * `replicas` — the number of master nodes to create;
  * `zones` — nodes can only be created in these zones;
  * `instanceClass` — partial contents of the fields of the [YandexInstanceClass](cr.html#yandexinstanceclass) CR. The `cores`, `memory`, `imageID` parameters are mandatory. The parameters in **bold** are unique for `YandexClusterConfiguration`. Possible values:
    * `cores`
    * `memory`
    * `imageID`
    * `additionalLabels` — additional labels to add to static nodes;
    * **`externalIPAddresses`** — a list of external addresses. The number of array elements must correspond to the number of `replicas`.
      * If `externalSubnetID` is not set, you have to use either [reserved public IP addresses](faq.html#reserving-a-public-ip-address) or the `Auto` constant;
      * If `externalSubnetID` is set, you must select specific unallocated IP addresses from the specified subnet;
    * **`externalSubnetID`** [DEPRECATED] — if specified, an additional network interface will be added to the node (the latter will use it as a default route);
    * **`externalSubnetIDs`** — if specified, an additional network interface will be added to the node (the latter will use it as a default route);
      Also, a route for the node's internal interface will be added (it will cover the entire `nodeNetworkCIDR` subnet);
      The number of array elements must correspond to the number of `replicas`.
* `nodeGroups` — an array of additional NodeGroups for creating static nodes (e.g., for dedicated front nodes or gateways). Each NodeGroup has the following parameters:
  * `name` — the name of the NodeGroup for generating node names;
  * `replicas` — the number of nodes to create;
  * `zones` — nodes can only be created in these zones;
  * `instanceClass` — partial contents of the fields of the [YandexInstanceClass](cr.html#yandexinstanceclass) CR. The `cores`, `memory`, `imageID` parameters are mandatory.  The parameters in **bold** are unique for  `YandexClusterConfiguration`. Possible values:
    * `cores`
    * `memory`
    * `imageID`
    * `coreFraction`
    * `additionalLabels` — additional labels to add to static nodes;
    * **`externalIPAddresses`** — a list of external addresses. The number of array elements must correspond to the number of `replicas`.
      * If `externalSubnetID` is not set, you have to use either [reserved public IP addresses](faq.html#reserving-a-public-ip-address) or the `Auto` constant;
      * If `externalSubnetID` is set, you must select specific unallocated IP addresses from the specified subnet;
    * **`externalSubnetID`** [DEPRECATED] — if specified, an additional network interface will be added to the node (the latter will use it as a default route);
    * **`externalSubnetIDs`** — if specified, an additional network interface will be added to the node (the latter will use it as a default route);
      Also, a route for the node's internal interface will be added (It will cover the entire `nodeNetworkCIDR` subnet);
      The number of array elements must correspond to the number of `replicas`.
  * `nodeTemplate` — parameters of Node objects in Kubernetes to add after registering the node;
    * `labels` — the same as the `metadata.labels` standard [field](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.20/#objectmeta-v1-meta);
      * An example:
        ```yaml
        labels:
          environment: production
          app: warp-drive-ai
        ```
    * `annotations` — the same as the `metadata.annotations` standard [field](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.20/#objectmeta-v1-meta);
      * An example:
        ```yaml
        annotations:
          ai.fleet.com/discombobulate: "true"
        ```
    * `taints` — the same as the `.spec.taints` field of the [Node](https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.20/#taint-v1-core) object. **Caution!** Only the `effect`, `key`, `values` fields are available.
      * An example:
        ```yaml
        taints:
        - effect: NoExecute
          key: ship-class
          value: frigate
        ```
* `nodeNetworkCIDR` — this subnet will be split into **three** equal parts; they will serve as a basis for subnets in three Yandex.Cloud zones;
* `existingNetworkID` — the ID of the existing VPC Network;
* `dhcpOptions` — a list of DHCP parameters to use for all subnets. Note that setting dhcpOptions may lead to [problems](faq.html#dhcpoptions-related-problems-and-ways-to-address-them);
  * `domainName` — the name of the search domain;
  * `domainNameServers` —  a list of recursive DNS addresses;
* `sshPublicKey` — a public key for accessing nodes;
* `labels` — labels to attach to resources created in the Yandex.Cloud. Note that you have to re-create all the machines to add new labels if labels were modified in the running cluster;
* `zones` — a limited set of zones in which nodes can be created;
  * An optional parameter;
  * Format — an array of strings;
