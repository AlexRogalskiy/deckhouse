#!/bin/bash

source /antiopa/shell_lib.sh

function __config__() {
  jo -p onStartup=10
}

function __main__() {
  default_storage_class_name=$(cluster::default_storage_class_name)

  if [[ -n "$default_storage_class_name" ]] ; then
    values::set global.cluster.defaultStorageClassName $default_storage_class_name
  else
    values::unset global.cluster.defaultStorageClassName
  fi
}

function __main_old__() {
  default_storage_class_name=$(cluster::default_storage_class_name)
  if [[ "$default_storage_class_name" != "" ]] ; then
    cat > $RETURN_VALUES_PATH <<END
global:
  cluster:
    defaultStorageClassName: ${default_storage_class_name}
END
  fi
}

hook::run $@
